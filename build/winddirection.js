!function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=488)}({100:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e,n,r){var a={lng:t.northeast.longitude,lat:t.southwest.latitude},o={lng:e.northeast.lng,lat:e.southwest.lat},i=(0,d.inLng)(a,e),u=(0,d.inLat)(a,e),s=(0,c.default)(t,n,r),f=l(s,2),p=f[0],h=f[1],y=Math.abs(a.lng-o.lng),m=Math.abs(a.lat-o.lat),g=r,v=n;return i||(g-=Math.floor(y/p)),u||(v-=Math.floor(m/h)),[g,v]}function i(t,e,n,r){var a={lng:t.southwest.longitude,lat:t.northeast.latitude},o={lng:e.southwest.lng,lat:e.northeast.lat},i=(0,d.inLng)(a,e),u=(0,d.inLat)(a,e),s=(0,c.default)(t,n,r),f=l(s,2),p=f[0],h=f[1],y=Math.abs(a.lng-o.lng),m=Math.abs(a.lat-o.lat),g=0,v=0;return i||(g=Math.floor(y/p)),u||(v=Math.floor(m/h)),[g,v]}function u(t,e,n,r){if(Math.abs(e.southwest.lng-e.northeast.lng)>=360)return[0,0,r,n];var u=(0,p.default)(e);return[].concat(a(i(t,u,n,r)),a(o(t,u,n,r)))}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){var n=[],r=!0,a=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){a=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(a)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.getPixelExtent=o,e.getPixelOrigins=i,e.default=u;var s=n(36),c=r(s),d=n(101),f=n(102),p=r(f)},101:function(t,e,n){"use strict";function r(t,e){var n=e.southwest,r=e.northeast;return t.lat>n.lat&&t.lat<r.lat}function a(t,e){var n=e.southwest,r=e.northeast,a=t.lng<r.lng,o=t.lng>n.lng,i=a&&o;return r.lng<n.lng&&(i=a||o),i}function o(t,e){return r(t,e)&&a(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.inLat=r,e.inLng=a,e.default=o},102:function(t,e,n){"use strict";function r(t){var e=new mapboxgl.LngLat(t.lng,t.lat).wrap();return{lat:e.lat,lng:e.lng}}function a(t){return{northeast:o({},r(t.northeast)),southwest:o({},r(t.southwest))}}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=a},12:function(t,e){},13:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.mapboxgl,n=arguments[2],a=document.createElement("div");a.classList.add("map","container"),document.body.appendChild(a),e.accessToken="pk.eyJ1Ijoic2NhcnlzaXplIiwiYSI6ImNrczA0cjhkNjA2bmQyd3BlYWl3djNzamQifQ.bRMUl7cIVMfad2UNjGIKoQ";var o=new e.Map(r({container:a,center:[0,0],zoom:1,style:"mapbox://styles/mapbox/dark-v9"},n));o.on("load",function(){return t(o)})}},14:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){r.classList.add("sidebar"),r.innerHTML=t,document.body.appendChild(r);var e=document.createElement("button"),n=document.createElement("i");n.innerHTML="info_outline",n.classList.add("material-icons"),e.classList.add("toggle-button"),e.appendChild(n),document.body.appendChild(e);var a=!1;e.addEventListener("click",function(){r.classList.toggle("sidebar--open"),e.classList.toggle("toggle-button--toggled"),n.innerHTML=a?"info_outline":"close",a=!a})};var r=document.createElement("div")},36:function(t,e,n){"use strict";function r(t,e,n){var r=t.northeast.longitude,a=t.southwest.latitude,o=t.southwest.longitude,i=t.northeast.latitude;return[Math.abs(o-r)/n,Math.abs(i-a)/e]}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},488:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t){var e=t.getSouthWest(),n=t.getNorthEast();return{southwest:{lng:e.lng,lat:e.lat},northeast:{lng:n.lng,lat:n.lat}}}function o(t){return t/256*128-64}function i(t,e,n){var r=Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),a="wind-arrow-calm-00";if(r>=2.5){var o=""+Math.round(r/5);o.length<2&&(o="0"+o),a=n.geometry.coordinates[1]>0?"wind-arrow-nh-"+o:"wind-arrow-sh-"+o}return a}function u(t,e){var n=Math.atan2(t,e);return n<0&&(n+=2*Math.PI),180*n/Math.PI}function l(t){var e=new f.default;t.addSource("source",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),t.addLayer({type:"symbol",source:"source",id:"arrow-layer",layout:{"icon-image":"{image}","icon-rotate":{property:"angle",type:"identity"},"icon-size":.8},paint:{"icon-color":{property:"color",type:"identity"}}});var n=(0,h.default)(function(){var n={bbox:M,bounds:a(t.getBounds()),samplingFactor:6,zoom:Math.floor(t.getZoom())};e.queryData(_,n).then(function(e){for(var n=0;n<e.features.length;n++){var r=e.features[n],a=r.properties.weatherParameters,l=a.u,s=a.v;l=o(l),s=o(s);var c=Math.sqrt(Math.pow(l,2)+Math.pow(s,2));r.properties.angle=u(l,s),r.properties.image=i(l,s,r),r.properties.color="hsla("+c/30*360+", 100%, 50%, 1)"}t.getSource("source").setData(e)})},100);t.on("move",n),n()}n(12);var s=n(13),c=r(s),d=n(97),f=r(d),p=n(95),h=r(p),y=n(489),m=r(y),g=n(14),v=r(g),b=n(490),w=r(b);(0,v.default)(w.default),(0,c.default)(l,window.mapboxgl,{style:m.default,center:[3.5708681554528994,54.86588820438166],zoom:5});var M={southwest:{latitude:-90,longitude:-180},northeast:{latitude:90,longitude:180}},_=[{url:"static/u-component.png",weatherParameter:"u"},{url:"static/v-component.png",weatherParameter:"v"}]},489:function(t,e){t.exports={version:8,name:"BASEMAP LIGHT",metadata:{"mapbox:autocomposite":!0,"mapbox:type":"template"},center:[4.349731568307675,51.94437828477908],zoom:10.878210297714592,bearing:0,pitch:0,sources:{composite:{url:"mapbox://mapbox.mapbox-terrain-v2,mapbox.mapbox-streets-v7",type:"vector"}},sprite:"static/sprite",glyphs:"mapbox://fonts/ubilabs/{fontstack}/{range}.pbf",layers:[{id:"background",type:"background",interactive:!0,paint:{"background-color":"hsl(55, 1%, 20%)"}},{id:"water",type:"fill",source:"composite","source-layer":"water",interactive:!0,paint:{"fill-color":"hsl(185, 2%, 10%)"}},{id:"building",type:"fill",source:"composite","source-layer":"building",interactive:!0,paint:{"fill-color":"#d6d6d6"}},{id:"tunnel_minor",type:"line",source:"composite","source-layer":"road",interactive:!0,filter:["all",["==","$type","LineString"],["all",["==","structure","tunnel"],["in","class","link","motorway_link","path","pedestrian","service","street","street_limited","track"]]],layout:{"line-cap":"butt","line-join":"miter"},paint:{"line-color":"#efefef","line-width":{base:1.55,stops:[[4,.25],[20,30]]},"line-dasharray":[.36,.18]}},{id:"tunnel_major",type:"line",source:"composite","source-layer":"road",interactive:!0,filter:["all",["==","$type","LineString"],["all",["==","structure","tunnel"],["in","class","motorway","primary","secondary","tertiary","trunk"]]],layout:{"line-cap":"butt","line-join":"miter"},paint:{"line-color":"#fff","line-width":{base:1.4,stops:[[6,.5],[20,30]]},"line-dasharray":[.28,.14]}},{id:"bridge_minor case",type:"line",source:"composite","source-layer":"road",interactive:!0,filter:["all",["==","$type","LineString"],["all",["==","structure","bridge"],["in","class","link","motorway_link","path","pedestrian","service","street","street_limited","track"]]],layout:{"line-cap":"butt","line-join":"miter"},paint:{"line-color":"#dedede","line-width":{base:1.6,stops:[[12,.5],[20,10]]},"line-gap-width":{base:1.55,stops:[[4,.25],[20,30]]}}},{id:"bridge_major case",type:"line",source:"composite","source-layer":"road",interactive:!0,filter:["all",["==","$type","LineString"],["all",["==","structure","bridge"],["in","class","motorway","primary","secondary","tertiary","trunk"]]],layout:{"line-cap":"butt","line-join":"miter"},paint:{"line-color":"#dedede","line-width":{base:1.6,stops:[[12,.5],[20,10]]},"line-gap-width":{base:1.55,stops:[[4,.25],[20,30]]}}},{id:"bridge_minor",type:"line",source:"composite","source-layer":"road",interactive:!0,filter:["all",["==","$type","LineString"],["all",["==","structure","bridge"],["in","class","link","motorway_link","path","pedestrian","service","street","street_limited","track"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#efefef","line-width":{base:1.55,stops:[[4,.25],[20,30]]}}},{id:"bridge_major",type:"line",source:"composite","source-layer":"road",interactive:!0,filter:["all",["==","$type","LineString"],["all",["==","structure","bridge"],["in","class","motorway","primary","secondary","tertiary","trunk"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fff","line-width":{base:1.4,stops:[[6,.5],[20,30]]}}},{id:"admin_country",type:"line",source:"composite","source-layer":"admin",interactive:!0,filter:["all",["==","$type","LineString"],["all",["<=","admin_level",2],["==","maritime",0]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#8b8a8a","line-width":{base:1.3,stops:[[3,.5],[22,15]]}}}],created:"2016-08-18T15:35:34.403Z",id:"cis0ho1ko005wgxm2yi13xqdu",modified:"2016-08-18T16:28:01.553Z",owner:"neutronenkind",draft:!1}},490:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default="\n<h1>Grid Data Pt. 2</h1>\n<p>\n  The concept of how the grid data is transmitted and the point features are\n  generated is explained in <a href=\"minimap.html\">Part 1</a> of the demo.\n</p>\n<p>\n  This time the data source isn't a simple binary image, but a grey scale one.\n  Actually it's two grey scale images: We encode a two-dimensional vector (u, v)\n  as grey values. This vector describes the direction the wind blows at a given\n  point (x, y). So each image encodes one component of this vector.\n</p>\n<p>\n  Now every time the map is moved, both images a sampled and point features\n  generated. Based on the vector a rotation is calculated, the vector's length is\n  used to select an icon to render and the color to display it in.\n</p>\n<hr />\n<p>\n  Zoom in to see some fancy wind patterns. Try the Caribbean or Mediterranean\n  sea.\n</p>\n"},95:function(t,e,n){(function(e){function n(t,e,n){function r(e){var n=y,r=m;return y=m=void 0,x=e,v=t.apply(r,n)}function o(t){return x=t,b=setTimeout(c,e),P?r(t):v}function i(t){var n=t-w,r=t-x,a=e-n;return O?_(a,g-r):a}function s(t){var n=t-w,r=t-x;return void 0===w||n>=e||n<0||O&&r>=g}function c(){var t=j();if(s(t))return d(t);b=setTimeout(c,i(t))}function d(t){return b=void 0,L&&y?r(t):(y=m=void 0,v)}function f(){void 0!==b&&clearTimeout(b),x=0,y=w=m=b=void 0}function p(){return void 0===b?v:d(j())}function h(){var t=j(),n=s(t);if(y=arguments,m=this,w=t,n){if(void 0===b)return o(w);if(O)return b=setTimeout(c,e),r(w)}return void 0===b&&(b=setTimeout(c,e)),v}var y,m,g,v,b,w,x=0,P=!1,O=!1,L=!0;if("function"!=typeof t)throw new TypeError(l);return e=u(e)||0,a(n)&&(P=!!n.leading,O="maxWait"in n,g=O?M(u(n.maxWait)||0,e):g,L="trailing"in n?!!n.trailing:L),h.cancel=f,h.flush=p,h}function r(t,e,r){var o=!0,i=!0;if("function"!=typeof t)throw new TypeError(l);return a(r)&&(o="leading"in r?!!r.leading:o,i="trailing"in r?!!r.trailing:i),n(t,e,{leading:o,maxWait:e,trailing:i})}function a(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function o(t){return!!t&&"object"==typeof t}function i(t){return"symbol"==typeof t||o(t)&&w.call(t)==c}function u(t){if("number"==typeof t)return t;if(i(t))return s;if(a(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=a(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(d,"");var n=p.test(t);return n||h.test(t)?y(t.slice(2),n?2:8):f.test(t)?s:+t}var l="Expected a function",s=NaN,c="[object Symbol]",d=/^\s+|\s+$/g,f=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,h=/^0o[0-7]+$/i,y=parseInt,m="object"==typeof e&&e&&e.Object===Object&&e,g="object"==typeof self&&self&&self.Object===Object&&self,v=m||g||Function("return this")(),b=Object.prototype,w=b.toString,M=Math.max,_=Math.min,j=function(){return v.Date.now()};t.exports=r}).call(e,n(96))},96:function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},97:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(){return{type:"FeatureCollection",features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(98),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(i),l=n(99),s=function(t){return t&&t.__esModule?t:{default:t}}(l),c={},d=function(){function t(){r(this,t)}return o(t,[{key:"queryData",value:function(t,e){var n=this,r=e.bbox,o=e.bounds,i=e.samplingFactor,u=e.zoom,l=t.map(function(t){var e=t.url,r=t.weatherParameter;return n._executeQuery(e,r)});return Promise.all(l).then(function(t){return(0,s.default)({grid:t,bbox:r},{bounds:o,zoom:u},i)}).then(a)}},{key:"_executeQuery",value:function(t,e){var n=this;return new Promise(function(r,a){n._fetchData(t).then(u.imageToBitmap).then(function(t){return{data:u.imageDataToPixels(t),height:t.height,width:t.width,weatherParameter:e}}).then(r).catch(function(t){return a(t)})})}},{key:"_fetchData",value:function(t){return c[t]?Promise.resolve(c[t]):new Promise(function(e,n){var r=new Image;r.crossOrigin="anonymous",r.addEventListener("error",n),r.addEventListener("load",function(){c[t]=r,e(r)}),r.src=t})}}]),t}();e.default=d},98:function(t,e,n){"use strict";function r(t){var e=document.createElement("canvas");e.height=t.height,e.width=t.width;var n=e.getContext("2d");return n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height)}function a(t){return Promise.resolve(r(t))}function o(t){for(var e=t.data,n=t.height,r=t.width,a=new Uint8Array(n*r),o=0,i=e.length;o<i;o+=4)a[o/4]=e[o];return a}Object.defineProperty(e,"__esModule",{value:!0}),e.imageToBitmap=a,e.imageDataToPixels=o},99:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e,n,r){var a=Math.pow(2,Math.floor(n)),o=Math.floor(1/(a*r)*e),i=Math.floor(1/(a*r)*t);return[Math.max(o,1),Math.max(i,1)]}function i(t,e){var n={};return t.forEach(function(t){var r=t.data[e];n[t.weatherParameter]=r}),{weatherParameters:n}}function u(t,e){return{type:"Feature",geometry:{type:"Point",coordinates:t},properties:e}}function l(t,e,n){var r,l=t.bbox,c=t.grid,f=e.bounds,h=e.zoom,y=c.map(function(t){for(var e=t.height,r=t.width,a=(0,p.default)(l,e,r),y=s(a,2),m=y[0],g=y[1],v=o(e,r,h,n),b=s(v,2),w=b[0],M=b[1],_=(0,d.default)(l,f,e,r),j=s(_,4),x=j[0],P=j[1],O=j[2],L=j[3],k=x-x%w,T=P-P%M,S=[],A=T;A<L;A+=M)for(var E=k;E<O;E+=w){var I=l.northeast.latitude-A*g,z=l.southwest.longitude+E*m,$=i(c,E+A*r);S.push(u([z,I],$))}return S});return(r=[]).concat.apply(r,a(y))}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){var n=[],r=!0,a=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){a=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(a)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.default=l;var c=n(100),d=r(c),f=n(36),p=r(f)}});